!function e(t,r,n){function i(o,a){if(!r[o]){if(!t[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var p=r[o]={exports:{}};t[o][0].call(p.exports,function(e){var r=t[o][1][e];return i(r?r:e)},p,p.exports,e,t,r,n)}return r[o].exports}for(var s="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t,r){(function(e){!function(t){function r(){this._pieces=[],this._parts=[]}function n(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}function i(){this.bufferBuilder=new r}function s(e){var t=e.charCodeAt(0);return t<=2047?"00":t<=65535?"000":t<=2097151?"0000":t<=67108863?"00000":"000000"}function o(e){return e.length>600?new Blob([e]).size:e.replace(/[^\u0000-\u007F]/g,s).length}function a(){this._events={}}function u(){a.call(this)}function c(e,t){u.call(this),t=v.extend({readDelay:0,paused:!1},t),this._source=e,this._start=0,this._readChunkSize=t.chunkSize||e.size,this._readDelay=t.readDelay,this.readable=!0,this.paused=t.paused,this._read()}function p(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function h(e,t,r,n){if(!(this instanceof h))return new h(options);var i=this;u.call(this),this.id=t,this.guid=p(),this._socket=e,this.writable=!0,this.readable=!0,this.paused=!1,this._closed=!1,this._ended=!1,r&&(n.guid=i.guid,this._write(1,n,this.id))}function f(e,t){if(!(this instanceof f))return new f(e,t);a.call(this);var r=this;this._options=v.extend({chunkSize:40960},t),this.streams={},"string"==typeof e?(this._nextId=0,this._socket=new WebSocket(e)):(this._nextId=1,this._socket=e),this._socket.binaryType="arraybuffer",this._socket.addEventListener("open",function(){r.emit("open")}),this._socket.addEventListener("error",function(e){for(var t=Object.keys(r.streams),n=0,i=t.length;n<i;n++)r.streams[t[n]]._onError(e);r.emit("error",e)}),this._socket.addEventListener("close",function(e,t){for(var n=Object.keys(r.streams),i=0,s=n.length;i<s;i++)r.streams[n[i]]._onClose();r.emit("close",e,t)}),this._socket.addEventListener("message",function(e,t){v.setZeroTimeout(function(){e=e.data;try{e=v.unpack(e)}catch(t){return r.emit("error",new Error("Received unparsable message: "+t))}if(!(e instanceof Array))return r.emit("error",new Error("Received non-array message"));if(3!=e.length)return r.emit("error",new Error("Received message with wrong part count: "+e.length));if("number"!=typeof e[0])return r.emit("error",new Error("Received message with non-number type: "+e[0]));switch(e[0]){case 0:break;case 1:var n=e[1],i=e[2],s=r._receiveStream(i,n.guid);r.emit("stream",s,n);break;case 2:var o=e[1],i=e[2],s=r.streams[i];s?s._onData(o):r.emit("error",new Error("Received `data` message for unknown stream: "+i));break;case 3:var i=e[2],s=r.streams[i];s?s._onPause():r.emit("error",new Error("Received `pause` message for unknown stream: "+i));break;case 4:var i=e[2],s=r.streams[i];s?s._onResume():r.emit("error",new Error("Received `resume` message for unknown stream: "+i));break;case 5:var i=e[2],s=r.streams[i];s?s._onEnd():r.emit("error",new Error("Received `end` message for unknown stream: "+i));break;case 6:var i=e[2],s=r.streams[i];s?s._onClose():r.emit("error",new Error("Received `close` message for unknown stream: "+i));break;case 7:var a=e[1],i=e[2],s=r.streams[i];s?s._onError(a):r.emit("error",new Error("Received `error` message for unknown stream: "+i));break;case 8:var u=e[1],i=e[2],s=r.streams[i];s?s._onCreateClientConnection(u):r.emit("error",new Error("Received `error` message for unknown stream: "+i));break;case 9:var c=e[1][0],p=e[1][1],i=e[2],s=r.streams[i];s?s._onMessage(c,p):r.emit("error",new Error("Received `error` message for unknown stream: "+i));break;default:r.emit("error",new Error("Unrecognized message type received: "+e[0]))}})})}var l={};l.useBlobBuilder=function(){try{return new Blob([]),!1}catch(e){return!0}}(),l.useArrayBufferView=!l.useBlobBuilder&&function(){try{return 0===new Blob([new Uint8Array([])]).size}catch(e){return!0}}(),l.supportsBinaryWebsockets=function(){try{var e=new WebSocket("ws://null");return e.onerror=function(){},"undefined"!=typeof e.binaryType}catch(t){return!1}}(),t.binaryFeatures=l,t.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder,r.prototype.append=function(e){"number"==typeof e?this._pieces.push(e):(this.flush(),this._parts.push(e))},r.prototype.flush=function(){if(this._pieces.length>0){var e=new Uint8Array(this._pieces);l.useArrayBufferView||(e=e.buffer),this._parts.push(e),this._pieces=[]}},r.prototype.getBuffer=function(){if(this.flush(),l.useBlobBuilder){for(var e=new BlobBuilder,t=0,r=this._parts.length;t<r;t++)e.append(this._parts[t]);return e.getBlob()}return new Blob(this._parts)},t.BinaryPack={unpack:function(e){var t=new n(e);return t.unpack()},pack:function(e){var t=new i;t.pack(e);var r=t.getBuffer();return r}},n.prototype.unpack=function(){var e=this.unpack_uint8();if(e<128){var t=e;return t}if((224^e)<32){var r=(224^e)-32;return r}var n;if((n=160^e)<=15)return this.unpack_raw(n);if((n=176^e)<=15)return this.unpack_string(n);if((n=144^e)<=15)return this.unpack_array(n);if((n=128^e)<=15)return this.unpack_map(n);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}},n.prototype.unpack_uint8=function(){var e=255&this.dataView[this.index];return this.index++,e},n.prototype.unpack_uint16=function(){var e=this.read(2),t=256*(255&e[0])+(255&e[1]);return this.index+=2,t},n.prototype.unpack_uint32=function(){var e=this.read(4),t=256*(256*(256*e[0]+e[1])+e[2])+e[3];return this.index+=4,t},n.prototype.unpack_uint64=function(){var e=this.read(8),t=256*(256*(256*(256*(256*(256*(256*e[0]+e[1])+e[2])+e[3])+e[4])+e[5])+e[6])+e[7];return this.index+=8,t},n.prototype.unpack_int8=function(){var e=this.unpack_uint8();return e<128?e:e-256},n.prototype.unpack_int16=function(){var e=this.unpack_uint16();return e<32768?e:e-65536},n.prototype.unpack_int32=function(){var e=this.unpack_uint32();return e<Math.pow(2,31)?e:e-Math.pow(2,32)},n.prototype.unpack_int64=function(){var e=this.unpack_uint64();return e<Math.pow(2,63)?e:e-Math.pow(2,64)},n.prototype.unpack_raw=function(e){if(this.length<this.index+e)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+e+" "+this.length);var t=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,t},n.prototype.unpack_string=function(e){for(var t,r,n=this.read(e),i=0,s="";i<e;)t=n[i],t<128?(s+=String.fromCharCode(t),i++):(192^t)<32?(r=(192^t)<<6|63&n[i+1],s+=String.fromCharCode(r),i+=2):(r=(15&t)<<12|(63&n[i+1])<<6|63&n[i+2],s+=String.fromCharCode(r),i+=3);return this.index+=e,s},n.prototype.unpack_array=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=this.unpack();return t},n.prototype.unpack_map=function(e){for(var t={},r=0;r<e;r++){var n=this.unpack(),i=this.unpack();t[n]=i}return t},n.prototype.unpack_float=function(){var e=this.unpack_uint32(),t=e>>31,r=(e>>23&255)-127,n=8388607&e|8388608;return(0==t?1:-1)*n*Math.pow(2,r-23)},n.prototype.unpack_double=function(){var e=this.unpack_uint32(),t=this.unpack_uint32(),r=e>>31,n=(e>>20&2047)-1023,i=1048575&e|1048576,s=i*Math.pow(2,n-20)+t*Math.pow(2,n-52);return(0==r?1:-1)*s},n.prototype.read=function(e){var t=this.index;if(t+e<=this.length)return this.dataView.subarray(t,t+e);throw new Error("BinaryPackFailure: read index out of range")},i.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()},i.prototype.pack=function(e){var t=typeof e;if("string"==t)this.pack_string(e);else if("number"==t)Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if("boolean"==t)e===!0?this.bufferBuilder.append(195):e===!1&&this.bufferBuilder.append(194);else if("undefined"==t)this.bufferBuilder.append(192);else{if("object"!=t)throw new Error('Type "'+t+'" not yet supported');if(null===e)this.bufferBuilder.append(192);else{var r=e.constructor;if(r==Array)this.pack_array(e);else if(r==Blob||r==File)this.pack_bin(e);else if(r==ArrayBuffer)l.useArrayBufferView?this.pack_bin(new Uint8Array(e)):this.pack_bin(e);else if("BYTES_PER_ELEMENT"in e)l.useArrayBufferView?this.pack_bin(new Uint8Array(e.buffer)):this.pack_bin(e.buffer);else if(r==Object)this.pack_object(e);else if(r==Date)this.pack_string(e.toString());else{if("function"!=typeof e.toBinaryPack)throw new Error('Type "'+r.toString()+'" not yet supported');this.bufferBuilder.append(e.toBinaryPack())}}}this.bufferBuilder.flush()},i.prototype.pack_bin=function(e){var t=e.length||e.byteLength||e.size;if(t<=15)this.pack_uint8(160+t);else if(t<=65535)this.bufferBuilder.append(218),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(219),this.pack_uint32(t)}this.bufferBuilder.append(e)},i.prototype.pack_string=function(e){var t=o(e);if(t<=15)this.pack_uint8(176+t);else if(t<=65535)this.bufferBuilder.append(216),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(217),this.pack_uint32(t)}this.bufferBuilder.append(e)},i.prototype.pack_array=function(e){var t=e.length;if(t<=15)this.pack_uint8(144+t);else if(t<=65535)this.bufferBuilder.append(220),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(221),this.pack_uint32(t)}for(var r=0;r<t;r++)this.pack(e[r])},i.prototype.pack_integer=function(e){if(-32<=e&&e<=127)this.bufferBuilder.append(255&e);else if(0<=e&&e<=255)this.bufferBuilder.append(204),this.pack_uint8(e);else if(-128<=e&&e<=127)this.bufferBuilder.append(208),this.pack_int8(e);else if(0<=e&&e<=65535)this.bufferBuilder.append(205),this.pack_uint16(e);else if(-32768<=e&&e<=32767)this.bufferBuilder.append(209),this.pack_int16(e);else if(0<=e&&e<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(e);else if(-2147483648<=e&&e<=2147483647)this.bufferBuilder.append(210),this.pack_int32(e);else if(-0x8000000000000000<=e&&e<=0x8000000000000000)this.bufferBuilder.append(211),this.pack_int64(e);else{if(!(0<=e&&e<=0x10000000000000000))throw new Error("Invalid integer");this.bufferBuilder.append(207),this.pack_uint64(e)}},i.prototype.pack_double=function(e){var t=0;e<0&&(t=1,e=-e);var r=Math.floor(Math.log(e)/Math.LN2),n=e/Math.pow(2,r)-1,i=Math.floor(n*Math.pow(2,52)),s=Math.pow(2,32),o=t<<31|r+1023<<20|i/s&1048575,a=i%s;this.bufferBuilder.append(203),this.pack_int32(o),this.pack_int32(a)},i.prototype.pack_object=function(e){var t=Object.keys(e),r=t.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this.bufferBuilder.append(222),this.pack_uint16(r);else{if(!(r<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(223),this.pack_uint32(r)}for(var n in e)e.hasOwnProperty(n)&&(this.pack(n),this.pack(e[n]))},i.prototype.pack_uint8=function(e){this.bufferBuilder.append(e)},i.prototype.pack_uint16=function(e){this.bufferBuilder.append(e>>8),this.bufferBuilder.append(255&e)},i.prototype.pack_uint32=function(e){var t=4294967295&e;this.bufferBuilder.append((4278190080&t)>>>24),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t)},i.prototype.pack_uint64=function(e){var t=e/Math.pow(2,32),r=e%Math.pow(2,32);this.bufferBuilder.append((4278190080&t)>>>24),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t),this.bufferBuilder.append((4278190080&r)>>>24),this.bufferBuilder.append((16711680&r)>>>16),this.bufferBuilder.append((65280&r)>>>8),this.bufferBuilder.append(255&r)},i.prototype.pack_int8=function(e){this.bufferBuilder.append(255&e)},i.prototype.pack_int16=function(e){this.bufferBuilder.append((65280&e)>>8),this.bufferBuilder.append(255&e)},i.prototype.pack_int32=function(e){this.bufferBuilder.append(e>>>24&255),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e)},i.prototype.pack_int64=function(e){var t=Math.floor(e/Math.pow(2,32)),r=e%Math.pow(2,32);this.bufferBuilder.append((4278190080&t)>>>24),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t),this.bufferBuilder.append((4278190080&r)>>>24),this.bufferBuilder.append((16711680&r)>>>16),this.bufferBuilder.append((65280&r)>>>8),this.bufferBuilder.append(255&r)};var d=Array.isArray;a.prototype.addListener=function(e,t,r,n){if("function"!=typeof t)throw new Error("addListener only takes instances of Function");return this.emit("newListener",e,"function"==typeof t.listener?t.listener:t),this._events[e]?d(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,this},a.prototype.on=a.prototype.addListener,a.prototype.once=function(e,t,r){function n(){i.removeListener(e,n),t.apply(this,arguments)}if("function"!=typeof t)throw new Error(".once only takes instances of Function");var i=this;return n.listener=t,i.on(e,n),this},a.prototype.removeListener=function(e,t,r){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");if(!this._events[e])return this;var n=this._events[e];if(d(n)){for(var i=-1,s=0,o=n.length;s<o;s++)if(n[s]===t||n[s].listener&&n[s].listener===t){i=s;break}if(i<0)return this;n.splice(i,1),0==n.length&&delete this._events[e]}else(n===t||n.listener&&n.listener===t)&&delete this._events[e];return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){return 0===arguments.length?(this._events={},this):(e&&this._events&&this._events[e]&&(this._events[e]=null),this)},a.prototype.listeners=function(e){return this._events[e]||(this._events[e]=[]),d(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},a.prototype.emit=function(e){var e=arguments[0],t=this._events[e];if(!t)return!1;if("function"==typeof t){switch(arguments.length){case 1:t.call(this);break;case 2:t.call(this,arguments[1]);break;case 3:t.call(this,arguments[1],arguments[2]);break;default:for(var r=arguments.length,n=new Array(r-1),i=1;i<r;i++)n[i-1]=arguments[i];t.apply(this,n)}return!0}if(d(t)){for(var r=arguments.length,n=new Array(r-1),i=1;i<r;i++)n[i-1]=arguments[i];for(var s=t.slice(),i=0,r=s.length;i<r;i++)s[i].apply(this,n);return!0}return!1};var v={inherits:function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},extend:function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},pack:t.BinaryPack.pack,unpack:t.BinaryPack.unpack,setZeroTimeout:function(e){function t(t){n.push(t),e.postMessage(i,"*")}function r(t){t.source==e&&t.data==i&&(t.stopPropagation&&t.stopPropagation(),n.length&&n.shift()())}var n=[],i="zero-timeout-message";return e.addEventListener?e.addEventListener("message",r,!0):e.attachEvent&&e.attachEvent("onmessage",r),t}(this)};t.util=v,v.inherits(u,a),u.prototype.pipe=function(e,t){function r(t){e.writable&&!1===e.write(t)&&u.pause&&u.pause()}function n(){u.readable&&u.resume&&u.resume()}function i(){c||(c=!0,e.end())}function s(){c||(c=!0,e.destroy())}function o(e){if(a(),0===this.listeners("error").length)throw e}function a(){u.removeListener("data",r),e.removeListener("drain",n),u.removeListener("end",i),u.removeListener("close",s),u.removeListener("error",o),e.removeListener("error",o),u.removeListener("end",a),u.removeListener("close",a),e.removeListener("end",a),e.removeListener("close",a)}var u=this;u.on("data",r),e.on("drain",n),e._isStdio||t&&t.end===!1||(u.on("end",i),u.on("close",s));var c=!1;return u.on("error",o),e.on("error",o),u.on("end",a),u.on("close",a),e.on("end",a),e.on("close",a),e.emit("pipe",u),e},t.Stream=u,v.inherits(c,u),c.prototype.pause=function(){this.paused=!0},c.prototype.resume=function(){this.paused=!1,this._read()},c.prototype.destroy=function(){this.readable=!1,clearTimeout(this._timeoutId)},c.prototype._read=function(){function e(){t._emitReadChunk()}var t=this,r=this._readDelay;0!==r?this._timeoutId=setTimeout(e,r):v.setZeroTimeout(e)},c.prototype._emitReadChunk=function(){if(!this.paused&&this.readable){var e=Math.min(this._source.size-this._start,this._readChunkSize);if(0===e)return this.readable=!1,void this.emit("end");var t=this._start+e,r=(this._source.slice||this._source.webkitSlice||this._source.mozSlice).call(this._source,this._start,t);this._start=t,this._read(),this.emit("data",r)}},t.BlobReadStream=c,v.inherits(h,u),h.prototype.guid=void 0,h.prototype._onDrain=function(){this.paused||this.emit("drain")},h.prototype._onClose=function(){this._closed||(this.readable=!1,this.writable=!1,this._closed=!0,this.emit("close"))},h.prototype._onError=function(e){this.readable=!1,this.writable=!1,this.emit("error",e)},h.prototype._onMessage=function(e,t){this.emit(e,t)},h.prototype._onCreateClientConnection=function(e){this.emit("createClientConnection",e)},h.prototype._onPause=function(){this.paused=!0,this.emit("pause")},h.prototype._onResume=function(){this.paused=!1,this.emit("resume"),this.emit("drain")},h.prototype._write=function(e,t,r){if(this._socket.readyState!==this._socket.constructor.OPEN)return!1;var n=v.pack([e,t,r]);return this._socket.send(n)!==!1},h.prototype.write=function(e){if(this.writable){var t=this._write(2,e,this.id);return!this.paused&&t}return this.emit("error",new Error("Stream is not writable")),!1},h.prototype.end=function(){this._ended=!0,this.readable=!1,this._write(5,null,this.id)},h.prototype.error=function(e){this._ended=!0,this.readable=!1,this._write(7,e,this.id)},h.prototype.createClientConnection=function(e){this._write(8,e,this.id)},h.prototype.message=function(e,t){this._write(9,[e,t],this.id)},h.prototype.destroy=h.prototype.destroySoon=function(){this._onClose(),this._write(6,null,this.id)},h.prototype._onEnd=function(){this._ended||(this._ended=!0,this.readable=!1,this.emit("end"))},h.prototype._onData=function(e){this.emit("data",e)},h.prototype.pause=function(){this._onPause(),this._write(3,null,this.id)},h.prototype.resume=function(){this._onResume(),this._write(4,null,this.id)},v.inherits(f,a),f.prototype.send=function(t,r){var n=this.createStream(r);if(t instanceof u)t.pipe(n);else if(v.isNode===!0)e.isBuffer(t)?new BufferReadStream(t,{chunkSize:this._options.chunkSize}).pipe(n):n.write(t);else if(v.isNode!==!0)if(t.constructor==Blob||t.constructor==File)new c(t,{chunkSize:this._options.chunkSize}).pipe(n);else if(t.constructor==ArrayBuffer){var i;if(l.useArrayBufferView&&(t=new Uint8Array(t)),l.useBlobBuilder){var s=new BlobBuilder;s.append(t),i=s.getBlob()}else i=new Blob([t]);new c(i,{chunkSize:this._options.chunkSize}).pipe(n)}else if("object"==typeof t&&"BYTES_PER_ELEMENT"in t){var i;if(l.useArrayBufferView||(t=t.buffer),l.useBlobBuilder){var s=new BlobBuilder;s.append(t),i=s.getBlob()}else i=new Blob([t]);new c(i,{chunkSize:this._options.chunkSize}).pipe(n)}else n.write(t);return n},f.prototype._receiveStream=function(e,t){var r=this,n=new h(this._socket,e,(!1));return n.guid=t,n.on("close",function(){delete r.streams[e]}),this.streams[e]=n,n},f.prototype.createStream=function(e){if(this._socket.readyState!==WebSocket.OPEN)throw new Error("Client is not yet connected or has closed");var t=this,r=this._nextId;this._nextId+=2;var n=new h(this._socket,r,(!0),e);return n.on("close",function(){delete t.streams[r]}),this.streams[r]=n,n},f.prototype.close=f.prototype.destroy=function(){this._socket.close()},t.BinaryClient=f}(this)}).call(this,{isBuffer:e("../node_modules/is-buffer/index.js")})},{"../node_modules/is-buffer/index.js":5}],2:[function(e,t,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function s(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!s(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,r,n,s,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(r=this._events[e],a(r))return!1;if(i(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:for(n=arguments.length,s=new Array(n-1),u=1;u<n;u++)s[u-1]=arguments[u];r.apply(this,s)}else if(o(r)){for(n=arguments.length,s=new Array(n-1),u=1;u<n;u++)s[u-1]=arguments[u];for(c=r.slice(),n=c.length,u=0;u<n;u++)c[u].apply(this,s)}return!0},n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned){var r;r=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var n=!1;return r.listener=t,this.on(e,r),this},n.prototype.removeListener=function(e,t){var r,n,s,a;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],s=r.length,n=-1,r===t||i(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(r)){for(a=s;a-- >0;)if(r[a]===t||r[a].listener&&r[a].listener===t){n=a;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],i(r))this.removeListener(e,r);else for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.listenerCount=function(e,t){var r;return r=e._events&&e._events[t]?i(e._events[t])?1:e._events[t].length:0}},{}],3:[function(e,t,r){var n=Object.prototype.hasOwnProperty,i=Object.prototype.toString,s=Object.defineProperty,o=Object.getOwnPropertyDescriptor,a=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===i.call(e)},u=function(e){"use strict";if(!e||"[object Object]"!==i.call(e))return!1;var t=n.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&n.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!t&&!r)return!1;var s;for(s in e);return"undefined"==typeof s||n.call(e,s)},c=function(e,t){s&&"__proto__"===t.name?s(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},p=function(e,t){if("__proto__"===t){if(!n.call(e,t))return;if(o)return o(e,t).value}return e[t]};t.exports=function h(){"use strict";var e,t,r,n,i,s,o=arguments[0],f=1,l=arguments.length,d=!1;for("boolean"==typeof o&&(d=o,o=arguments[1]||{},f=2),(null==o||"object"!=typeof o&&"function"!=typeof o)&&(o={});f<l;++f)if(e=arguments[f],null!=e)for(t in e)r=p(o,t),n=p(e,t),o!==n&&(d&&n&&(u(n)||(i=a(n)))?(i?(i=!1,s=r&&a(r)?r:[]):s=r&&u(r)?r:{},c(o,{name:t,newValue:h(d,s,n)})):"undefined"!=typeof n&&c(o,{name:t,newValue:n}));return o}},{}],4:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],5:[function(e,t,r){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function i(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}t.exports=function(e){return null!=e&&(n(e)||i(e)||!!e._isBuffer)}},{}],6:[function(e,t,r){t.exports=function(e,t,r){for(var n=(2<<Math.log(t.length-1)/Math.LN2)-1,i=Math.ceil(1.6*n*r/t.length),s="";;)for(var o=e(i),a=0;a<i;a++){var u=o[a]&n;if(t[u]&&(s+=t[u],s.length===r))return s}}},{}],7:[function(e,t,r){"use strict";t.exports=e("./lib/index")},{"./lib/index":11}],8:[function(e,t,r){"use strict";function n(){l=!1}function i(e){if(!e)return void(h!==v&&(h=v,n()));if(e!==h){if(e.length!==v.length)throw new Error("Custom alphabet for shortid must be "+v.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter(function(e,t,r){return t!==r.lastIndexOf(e)});if(t.length)throw new Error("Custom alphabet for shortid must be "+v.length+" unique characters. These characters were not unique: "+t.join(", "));h=e,n()}}function s(e){return i(e),h}function o(e){d.seed(e),f!==e&&(n(),f=e)}function a(){h||i(v);for(var e,t=h.split(""),r=[],n=d.nextValue();t.length>0;)n=d.nextValue(),e=Math.floor(n*t.length),r.push(t.splice(e,1)[0]);return r.join("")}function u(){return l?l:l=a()}function c(e){var t=u();return t[e]}function p(){return h||v}var h,f,l,d=e("./random/random-from-seed"),v="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";t.exports={get:p,characters:s,seed:o,lookup:c,shuffled:u}},{"./random/random-from-seed":14}],9:[function(e,t,r){"use strict";function n(e){var t="",r=Math.floor(.001*(Date.now()-a));return r===s?i++:(i=0,s=r),t+=o(u),t+=o(e),i>0&&(t+=o(i)),t+=o(r)}var i,s,o=e("./generate"),a=(e("./alphabet"),1459707606518),u=6;t.exports=n},{"./alphabet":8,"./generate":10}],10:[function(e,t,r){"use strict";function n(e){for(var t,r=0,n="";!t;)n+=o(s,i.get(),1),t=e<Math.pow(16,r+1),r++;return n}var i=e("./alphabet"),s=e("./random/random-byte"),o=e("nanoid/format");t.exports=n},{"./alphabet":8,"./random/random-byte":13,"nanoid/format":6}],11:[function(e,t,r){"use strict";function n(e){return a.seed(e),t.exports}function i(e){return p=e,t.exports}function s(e){return void 0!==e&&a.characters(e),a.shuffled()}function o(){return u(p)}var a=e("./alphabet"),u=e("./build"),c=e("./is-valid"),p=e("./util/cluster-worker-id")||0;t.exports=o,t.exports.generate=o,t.exports.seed=n,t.exports.worker=i,t.exports.characters=s,t.exports.isValid=c},{"./alphabet":8,"./build":9,"./is-valid":12,"./util/cluster-worker-id":15}],12:[function(e,t,r){"use strict";function n(e){if(!e||"string"!=typeof e||e.length<6)return!1;var t=new RegExp("[^"+i.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]");return!t.test(e)}var i=e("./alphabet");t.exports=n},{"./alphabet":8}],13:[function(e,t,r){"use strict";var n,i="object"==typeof window&&(window.crypto||window.msCrypto);n=i&&i.getRandomValues?function(e){return i.getRandomValues(new Uint8Array(e))}:function(e){for(var t=[],r=0;r<e;r++)t.push(Math.floor(256*Math.random()));return t},t.exports=n},{}],14:[function(e,t,r){"use strict";function n(){return s=(9301*s+49297)%233280,s/233280}function i(e){s=e}var s=1;t.exports={nextValue:n,seed:i}},{}],15:[function(e,t,r){"use strict";t.exports=0},{}],16:[function(e,t,r){t.exports={name:"iobio.js",version:"1.1.1",description:"Client side iobio javascript library for building and executing iobio commands",browser:{binaryjs:"./lib/binary.js"},"browserify-shim":{external:"global:External"},devDependencies:{brfs:"^1.4.0",browserify:"^10.2.0","browserify-istanbul":"^0.2.1","browserify-shim":"~3.8.0",coveralls:"^2.11.2",gulp:"^3.8.11","gulp-sourcemaps":"^1.5.2","gulp-uglify":"^1.2.0","jasmine-core":"^2.4.1",karma:"^0.12.31","karma-browserify":"^4.1.2","karma-chrome-launcher":"^0.1.7","karma-coverage":"0.2.6","karma-firefox-launcher":"^0.1.6","karma-jasmine":"^0.3.5","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.1.0"},dependencies:{extend:"^2.0.1",inherits:"^2.0.1",shortid:"^2.2.2"},scripts:{testServer:"node ./node_modules/karma/bin/karma start test/karma.conf.js",test:"gulp testTravis"}}},{}],17:[function(e,t,r){(function(r){var n=r.iobio||{};r.iobio=n,n.version=e("../package.json").version,"object"==typeof t&&(t.exports=n);var i=e("events").EventEmitter,s=e("inherits"),o=e("shortid"),a=e("extend"),u=e("./conn.js");n.cmd=function(t,r,n){i.call(this);var s=this;this.id=o.generate(),this.options={id:s.id},a(this.options,n),this.protocol=this.options.ssl?"wss":"ws",this.service=t,this.params=r,this.pipedCommands={},this.pipedCommands[this.options.id]=this,this.argCommands={},r=r||[],this.connection=new u(this.protocol,t,r,this.options),e("./utils/bindStreamEvents")(this,this.connection)},s(n.cmd,i),n.cmd.prototype.pipe=function(e,t,r){var i={urlparams:{stdin:this.url()}};a(!0,i,r),t=t||[];var s=new n.cmd(e,t,i);for(var o in this.pipedCommands){s.pipedCommands[o]=this.pipedCommands[o];for(var o in this.connection.urlBuilder.argCommands)s.connection.urlBuilder.argCommands[o]=this.connection.urlBuilder.argCommands[o]}return s},n.cmd.prototype.url=function(){return(this.options.ssl?"iobios://":"iobio://")+this.connection.uri},n.cmd.prototype.http=function(){return"http://"+this.connection.uri},n.cmd.prototype.https=function(){return"https://"+this.connection.uri},n.cmd.prototype.ws=function(){return"ws://"+this.connection.uri},n.cmd.prototype.wss=function(){return"wss://"+this.connection.uri},n.cmd.prototype.id=this.id,n.cmd.prototype.protocol=function(e){return arguments.length?(this.protocol=e,this):this.protocol},n.cmd.prototype.service=function(e){return arguments.length?(this.service=e,this):this.service},n.cmd.prototype.arguments=function(e){return arguments.length?(this.params=e,this):this.params},n.cmd.prototype.run=function(){this.connection.run(this.pipedCommands)},n.cmd.prototype.closeClient=function(){this.connection&&this.connection.runner&&this.connection.runner.closeClient()},n.cmd.prototype.kill=function(){this.connection&&this.connection.runner&&this.connection.runner.kill()},n.cmd.prototype.end=function(){this.connection&&this.connection.runner&&this.connection.runner.end()},n.cmd.prototype.toString=function(){
return"[object iobio.cmd]"}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../package.json":16,"./conn.js":18,"./utils/bindStreamEvents":24,events:2,extend:3,inherits:4,shortid:7}],18:[function(e,t,r){var n=e("events").EventEmitter,i=e("inherits"),s=function(t,r,i,s){n.call(this);this.opts=s,this.service=r,this.protocol=t,this.params=i;var o=e("./urlBuilder.js"),a=new o(r,i,s);this.urlBuilder=a,this.uri=a.uri,"ws"==t||"wss"==t?this.Runner=e("./protocol/ws.js"):"http"!=t&&"https"!=t||(this.Runner=e("./protocol/http.js"))};i(s,n),s.prototype.run=function(t){this.runner=new this.Runner(this.urlBuilder,t,this.opts);e("./utils/bindStreamEvents")(this,this.runner)},t.exports=s},{"./protocol/http.js":19,"./protocol/ws.js":20,"./urlBuilder.js":23,"./utils/bindStreamEvents":24,events:2,inherits:4}],19:[function(e,t,r){},{}],20:[function(e,t,r){var n=e("events").EventEmitter,i=e("inherits"),s=function(t,r,i){n.call(this);var s=i.ssl?"wss":"ws",o=s+"://"+t.uri,a=e("binaryjs").BinaryClient,u=a(o),c=this;this.client=u,this.stream,u.on("open",function(e){var e=u.createStream({event:"run",params:{url:o}}),n=!0,p=[];c.stream=e,e.on("createClientConnection",function(e){var n,o,u=e.id.split("&")[0];if(r[u]){o=r[u];var c=o.options,h=o.connection.urlBuilder}else if(t.argCommands[u]){o=t.argCommands[u];var c=o.options,h=o.connection.urlBuilder}else var c=i,h=t;n=e.serverAddress?e.serverAddress:c&&c.writeStream&&c.writeStream.serverAddress?c.writeStream.serverAddress:h.service;var f=a(s+"://"+n);p.push(f),f.on("open",function(){var t=f.createStream({event:"clientConnected",connectionID:e.id}),r=e.argPos||0,n=h.files[r];n.write(t,c),t.on("softend",function(){n.end()})})}),e.on("data",function(e,t){n&&(n=!1,c.emit("start")),c.emit("data",e)}),e.on("end",function(){c.emit("end"),c.closeClient(),p.forEach(function(e){e.close()})}),e.on("exit",function(e){c.emit("exit",e)}),e.on("error",function(e){c.emit("error",e)}),e.on("queue",function(e){c.emit("queue",e)})})};i(s,n),s.prototype.closeClient=function(){this.client&&this.client.close()},s.prototype.kill=function(){this.stream&&this.stream.end()},s.prototype.end=function(){this.stream&&this.stream.message("softend")},t.exports=s},{binaryjs:1,events:2,inherits:4}],21:[function(e,t,r){var n=e("binaryjs").BlobReadStream,i=function(e){var t=this;t.fileObj=e,t.url=encodeURIComponent("http://client")};i.prototype.getType=function(){return"file"},i.prototype.getFileObj=function(){return this.fileObj},i.prototype.getUrl=function(){return this.url},i.prototype.write=function(e,t){this.stream=e;var r=t.chunkSize||512e3;"[object Function]"==Object.prototype.toString.call(this.fileObj)?this.fileObj(e,function(){e.end()}):new n(this.fileObj,{chunkSize:r}).pipe(e)},i.prototype.end=function(){this.stream&&this.stream.end()},t.exports=i},{binaryjs:1}],22:[function(e,t,r){var n=function(e){var t="http"+e.slice(5,e.length);this.url=encodeURIComponent(t)};n.prototype.getType=function(){return"url"},n.prototype.getUrl=function(){return this.url},t.exports=n},{}],23:[function(e,t,r){var n=function(t,r,n){var i=e("./utils/hash2UrlParams.js"),s=(e("events").EventEmitter(),e("./source/file.js")),o=e("./source/url.js"),a=!1;n=n||{},this.uri=null,this.service=t,this.files=[],this.argCommands={};for(var u=this,c=0;c<r.length;c++)if("[object File]"==Object.prototype.toString.call(r[c])||"[object Blob]"==Object.prototype.toString.call(r[c])||"[object Function]"==Object.prototype.toString.call(r[c])){a=!0;var p=new s(r[c]);u.files.push(p),r[c]=p.getUrl()}else if("[object iobio.cmd]"==r[c].toString()){u.argCommands[r[c].id]=r[c];var p=new o(r[c].url());r[c]=p.getUrl()}else if("iobio://"==r[c].toString().slice(0,8)){var p=new o(r[c]);r[c]=p.getUrl()}if(n&&n.urlparams&&n.urlparams.stdin){var p=new o(n.urlparams.stdin);n.urlparams.stdin=p.getUrl()}this.uri=encodeURI(t+"?cmd="+r.join(" ")+i(n.urlparams)+i({id:n.id})),a&&(this.uri+="&protocol=websocket"),this.uri+="&iobiojsversion="+iobio.version};t.exports=n},{"./source/file.js":21,"./source/url.js":22,"./utils/hash2UrlParams.js":25,events:2}],24:[function(e,t,r){var n=function(e,t){t.on("data",function(t){e.emit("data",t)}),t.on("end",function(){e.emit("end")}),t.on("start",function(){e.emit("start")}),t.on("exit",function(t){e.emit("exit",t)}),t.on("error",function(t){e.emit("error",t)}),t.on("queue",function(t){e.emit("queue",t)})};t.exports=n},{}],25:[function(e,t,r){var n=function(e){var t="";return e&&(t="&"+Object.keys(e).map(function(t){return t+"="+e[t]}).join("&")),t};t.exports=n},{}]},{},[17]);